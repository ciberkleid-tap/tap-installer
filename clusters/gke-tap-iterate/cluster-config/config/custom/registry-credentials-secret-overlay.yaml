apiVersion: v1
kind: Secret
metadata:
  name: registry-credentials-overlay
  namespace: tap-install
  annotations:
    kapp.k14s.io/change-rule: "delete after deleting tap"
stringData:
  registry-credentials-overlay.yaml: |
    #@ load("@ytt:overlay", "overlay")
    #@overlay/match by=overlay.subset({"apiVersion": "v1", "kind": "ServiceAccount","metadata":{"name":"default"}}), expects="0+"
    ---
    secrets:
    #@overlay/append
    - name: git-ssh
    #@overlay/append
    - name: registry-credentials

    imagePullSecrets:
    #@overlay/append
    - name: registry-credentials
